<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="survey">

	<select id="read" resultType="Map" parameterType="Map">
      select *
      from sm_survey
      WHERE SURVEY_SEQ=#{SURVEY_SEQ}
   </select>
   
   	<select id="list" resultType="Map" parameterType="Map">
      select *
      from sm_survey
		WHERE 1=1
   </select>
   
   	<select id="member_list" resultType="Map" parameterType="Map">
      select *
      from sm_member
   		<where>
			<choose>
			    <when test="MEMBER_EMAIL==null">
			    	WHERE 1=1
			    </when>
			    <otherwise>
			    	WHERE MEMBER_EMAIL = #{MEMBER_EMAIL}
			    </otherwise>
		    </choose>
	    </where>
   </select>
   

   
	<insert id = "insert_board_img_rel" parameterType="Map">
		INSERT INTO
		board_img_rel(BOARD_SEQ, IMG_SEQ)
		VALUES(SEQ_BOARD.currval, SEQ_IMG.currval)
	</insert>

	
	<update id = "update_board" parameterType="Map">
		UPDATE board
		SET TITLE = #{TITLE}, CONTENTS =#{CONTENTS}, UPLOAD_DATE = sysdate
		WHERE BOARD_SEQ = #{BOARD_SEQ}
	</update>


	<delete id="delete_board" parameterType="Map">
		delete from BOARD
		where BOARD_SEQ = #{BOARD_SEQ}
	</delete>
	
	
	
	
	
</mapper>